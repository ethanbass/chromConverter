<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><title>Read 'Shimadzu' LCD — read_shimadzu_lcd • chromConverter</title><!-- favicons --><link rel="icon" type="image/png" sizes="16x16" href="../favicon-16x16.png"><link rel="icon" type="image/png" sizes="32x32" href="../favicon-32x32.png"><link rel="apple-touch-icon" type="image/png" sizes="180x180" href="../apple-touch-icon.png"><link rel="apple-touch-icon" type="image/png" sizes="120x120" href="../apple-touch-icon-120x120.png"><link rel="apple-touch-icon" type="image/png" sizes="76x76" href="../apple-touch-icon-76x76.png"><link rel="apple-touch-icon" type="image/png" sizes="60x60" href="../apple-touch-icon-60x60.png"><script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><link href="../deps/bootstrap-5.3.1/bootstrap.min.css" rel="stylesheet"><script src="../deps/bootstrap-5.3.1/bootstrap.bundle.min.js"></script><link href="../deps/font-awesome-6.5.2/css/all.min.css" rel="stylesheet"><link href="../deps/font-awesome-6.5.2/css/v4-shims.min.css" rel="stylesheet"><script src="../deps/headroom-0.11.0/headroom.min.js"></script><script src="../deps/headroom-0.11.0/jQuery.headroom.min.js"></script><script src="../deps/bootstrap-toc-1.0.1/bootstrap-toc.min.js"></script><script src="../deps/clipboard.js-2.0.11/clipboard.min.js"></script><script src="../deps/search-1.0.0/autocomplete.jquery.min.js"></script><script src="../deps/search-1.0.0/fuse.min.js"></script><script src="../deps/search-1.0.0/mark.min.js"></script><!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="Read 'Shimadzu' LCD — read_shimadzu_lcd"><meta name="description" content="Read 3D PDA or 2D chromatogram streams from 'Shimadzu' .lcd files."><meta property="og:description" content="Read 3D PDA or 2D chromatogram streams from 'Shimadzu' .lcd files."><meta property="og:image" content="https://ethanbass.github.io/chromConverter/logo.png"></head><body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>


    <nav class="navbar navbar-expand-lg fixed-top bg-light" data-bs-theme="light" aria-label="Site navigation"><div class="container">

    <a class="navbar-brand me-2" href="../index.html">chromConverter</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">0.7.5</small>


    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto"><li class="active nav-item"><a class="nav-link" href="../reference/index.html">Reference</a></li>
<li class="nav-item dropdown">
  <button class="nav-link dropdown-toggle" type="button" id="dropdown-articles" data-bs-toggle="dropdown" aria-expanded="false" aria-haspopup="true">Articles</button>
  <ul class="dropdown-menu" aria-labelledby="dropdown-articles"><li><a class="dropdown-item" href="../articles/plot_ms.html">Intro to plotting mass spectrometry data</a></li>
  </ul></li>
<li class="nav-item"><a class="nav-link" href="../news/index.html">Changelog</a></li>
      </ul><ul class="navbar-nav"><li class="nav-item"><form class="form-inline" role="search">
 <input class="form-control" type="search" name="search-input" id="search-input" autocomplete="off" aria-label="Search site" placeholder="Search for" data-search-index="../search.json"></form></li>
<li class="nav-item"><a class="external-link nav-link" href="https://github.com/ethanbass/chromConverter/" aria-label="GitHub"><span class="fa fab fa-github fa-lg"></span></a></li>
      </ul></div>


  </div>
</nav><div class="container template-reference-topic">
<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">
      <img src="../logo.png" class="logo" alt=""><h1>Read 'Shimadzu' LCD</h1>
      <small class="dont-index">Source: <a href="https://github.com/ethanbass/chromConverter/blob/v0.7.5/R/read_shimadzu_lcd.R" class="external-link"><code>R/read_shimadzu_lcd.R</code></a></small>
      <div class="d-none name"><code>read_shimadzu_lcd.Rd</code></div>
    </div>

    <div class="ref-description section level2">
    <p>Read 3D PDA or 2D chromatogram streams from 'Shimadzu' <code>.lcd</code> files.</p>
    </div>

    <div class="section level2">
    <h2 id="ref-usage">Usage<a class="anchor" aria-label="anchor" href="#ref-usage"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span><span class="fu">read_shimadzu_lcd</span><span class="op">(</span></span>
<span>  <span class="va">path</span>,</span>
<span>  <span class="va">what</span>,</span>
<span>  format_out <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"matrix"</span>, <span class="st">"data.frame"</span>, <span class="st">"data.table"</span><span class="op">)</span>,</span>
<span>  data_format <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"wide"</span>, <span class="st">"long"</span><span class="op">)</span>,</span>
<span>  read_metadata <span class="op">=</span> <span class="cn">TRUE</span>,</span>
<span>  metadata_format <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"chromconverter"</span>, <span class="st">"raw"</span><span class="op">)</span>,</span>
<span>  scale <span class="op">=</span> <span class="cn">TRUE</span>,</span>
<span>  collapse <span class="op">=</span> <span class="cn">TRUE</span></span>
<span><span class="op">)</span></span></code></pre></div>
    </div>

    <div class="section level2">
    <h2 id="arguments">Arguments<a class="anchor" aria-label="anchor" href="#arguments"></a></h2>


<dl><dt id="arg-path">path<a class="anchor" aria-label="anchor" href="#arg-path"></a></dt>
<dd><p>Path to 'Shimadzu' <code>.lcd</code> file.</p></dd>


<dt id="arg-what">what<a class="anchor" aria-label="anchor" href="#arg-what"></a></dt>
<dd><p>What stream to get: current options are <code>pda</code>, chromatograms
(<code>chroms</code>), <code>tic</code>, or peak lists (<code>peak_table</code>). If a stream
is not specified, the function will default to <code>pda</code> if the PDA stream
is present.</p></dd>


<dt id="arg-format-out">format_out<a class="anchor" aria-label="anchor" href="#arg-format-out"></a></dt>
<dd><p>Matrix or data.frame.</p></dd>


<dt id="arg-data-format">data_format<a class="anchor" aria-label="anchor" href="#arg-data-format"></a></dt>
<dd><p>Either <code>wide</code> (default) or <code>long</code>.</p></dd>


<dt id="arg-read-metadata">read_metadata<a class="anchor" aria-label="anchor" href="#arg-read-metadata"></a></dt>
<dd><p>Logical. Whether to attach metadata. Defaults to <code>TRUE</code>.</p></dd>


<dt id="arg-metadata-format">metadata_format<a class="anchor" aria-label="anchor" href="#arg-metadata-format"></a></dt>
<dd><p>Format to output metadata. Either <code>chromconverter</code>
or <code>raw</code>.</p></dd>


<dt id="arg-scale">scale<a class="anchor" aria-label="anchor" href="#arg-scale"></a></dt>
<dd><p>Whether to scale the data by the value factor. Defaults to
<code>TRUE</code>.</p></dd>


<dt id="arg-collapse">collapse<a class="anchor" aria-label="anchor" href="#arg-collapse"></a></dt>
<dd><p>Logical. Whether to collapse lists that only contain a single
element.</p></dd>

</dl></div>
    <div class="section level2">
    <h2 id="value">Value<a class="anchor" aria-label="anchor" href="#value"></a></h2>
    <p>A chromatogram or list of chromatograms in the format specified by
<code>data_format</code> and <code>format_out</code>. If <code>data_format</code> is <code>wide</code>,
the chromatogram(s) will be returned with retention times as rows and a
single column for the intensity. If <code>long</code> format is requested, two
columns will be returned: one for the retention time and one for the intensity.
The <code>format_out</code> argument determines whether chromatograms are returned
as a <code>matrix</code>, <code>data.frame</code>, or <code>data.table</code>. Metadata can be
attached to the chromatogram as <code><a href="https://rdrr.io/r/base/attributes.html" class="external-link">attributes</a></code> if
<code>read_metadata</code> is <code>TRUE</code>.</p>
    </div>
    <div class="section level2">
    <h2 id="details">Details<a class="anchor" aria-label="anchor" href="#details"></a></h2>
    <p>A parser to read data from 'Shimadzu' <code>.lcd</code> files. LCD files are
encoded as 'Microsoft' OLE documents. The parser relies on the
<a href="https://pypi.org/project/olefile/" class="external-link">olefile</a> package in Python to unpack the
files. The PDA data is encoded in a stream called <code>PDA 3D Raw Data:3D Raw Data</code>.
The PDA data stream contains a segment for each retention time, beginning
with a 24-byte header.</p>
<p>The 24 byte header consists of the following fields:</p><ul><li><p>4 bytes: segment label (<code>17234</code>).</p></li>
<li><p>4 bytes: Little-endian integer specifying the sampling rate along the time
axis for 2D streams or along the spectral axis (?) for PDA streams.</p></li>
<li><p>4 bytes: Little-endian integer specifying the number of values in the file
(for 2D data) or the number of wavelength values in each segment (for 3D data).</p></li>
<li><p>4 bytes: Little-endian integer specifying the total number of bytes in the segment.</p></li>
<li><p>8 bytes of <code>00</code>.</p></li>
</ul><p>For 3D data, Each time point is divided into two sub-segments, which begin and
end with an integer specifying the length of the sub-segment in bytes. 2D data
are structured similarly but with more segments. All known values
in this the LCD data streams are little-endian and the data are delta-encoded.
The first hexadecimal digit of each value is a sign digit specifying the
number of bytes in the delta and whether the value is positive
or negative. The sign digit represents the number of hexadecimal digits used
to encode each value. Even numbered sign digits correspond to positive deltas,
whereas odd numbers indicate negative deltas. Positive values are encoded as
little-endian integers, while negative values are encoded as two's
complements. The value at each position is derived by subtracting the delta
at each position from the previous value.</p>
    </div>
    <div class="section level2">
    <h2 id="note">Note<a class="anchor" aria-label="anchor" href="#note"></a></h2>
    <p>My parsing of the date-time format seems to be a little off, since
the acquisition times diverge slightly from the ASCII file.</p>
    </div>
    <div class="section level2">
    <h2 id="see-also">See also<a class="anchor" aria-label="anchor" href="#see-also"></a></h2>
    <div class="dont-index"><p>Other 'Shimadzu' parsers:
<code><a href="read_shimadzu.html">read_shimadzu</a>()</code>,
<code><a href="read_shimadzu_gcd.html">read_shimadzu_gcd</a>()</code>,
<code><a href="read_shimadzu_qgd.html">read_shimadzu_qgd</a>()</code>,
<code><a href="read_sz_lcd_2d.html">read_sz_lcd_2d</a>()</code>,
<code><a href="read_sz_lcd_3d.html">read_sz_lcd_3d</a>()</code></p></div>
    </div>
    <div class="section level2">
    <h2 id="author">Author<a class="anchor" aria-label="anchor" href="#author"></a></h2>
    <p>Ethan Bass</p>
    </div>

    <div class="section level2">
    <h2 id="ref-examples">Examples<a class="anchor" aria-label="anchor" href="#ref-examples"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span class="r-in"><span><span class="kw">if</span> <span class="op">(</span><span class="cn">FALSE</span><span class="op">)</span> <span class="op">{</span> <span class="co"># \dontrun{</span></span></span>
<span class="r-in"><span><span class="fu">read_shimadzu_lcd</span><span class="op">(</span><span class="va">path</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="op">}</span> <span class="co"># }</span></span></span>
</code></pre></div>
    </div>
  </main><aside class="col-md-3"><nav id="toc" aria-label="Table of contents"><h2>On this page</h2>
    </nav></aside></div>


    <footer><div class="pkgdown-footer-left">
  <p>Developed by Ethan Bass.</p>
</div>

<div class="pkgdown-footer-right">
  <p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.1.1.</p>
</div>

    </footer></div>





  </body></html>

